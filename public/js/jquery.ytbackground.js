;(function($,window){var pluginName='ytBackground',defaults={ratio:16/9,videoId:'ZCAnLxRvNNc',mute:true,repeat:true,width:$(window).width(),wrapperZIndex:99,playButtonClass:'tubular-play',pauseButtonClass:'tubular-pause',muteButtonClass:'tubular-mute',volumeUpClass:'tubular-volume-up',volumeDownClass:'tubular-volume-down',increaseVolumeBy:10,start:0};function Plugin(element,options){this.element=element;this.$el=$(element);this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.init();}
$.extend(Plugin.prototype,{init:function(){var base=this;base.$el.css({position:'relative','z-index':base.options.wrapperZIndex});window.player={};if(typeof(YT)=='undefined'||typeof(YT.Player)=='undefined'){window.onYouTubeIframeAPIReady=function(){base.loadYT();}}else{base.loadYT();}
$(window).on('resize.tubular',function(){base.resizeYT();});base.playerClickEvents();base.loadYTIframe();},onPlayerReady:function(e,base){var pID=base.ID,$pID=$('#'+pID),regVids=$('.section').find('video.hosted-video');base.resizeYT();if(base.options.mute){e.target.mute();}
e.target.seekTo(base.options.start);$('.tubular-player').each(function(){var ID=$(this).attr('ID');if(typeof YT.get(ID).pauseVideo!=='undefined'){YT.get(ID).pauseVideo();}});var first=YT.get('tubular-player-1');if(first&&typeof first.playVideo!=='undefined'){first.playVideo();}
if(regVids.closest('.section').attr('id')=='section-1'||regVids.closest('.section').hasClass('active')){regVids.get(0)&&regVids.get(0).play();}
$('.tubular-player').animate({'opacity':1});},onPlayerStateChange:function(state,base){if(state.data===0){state.target.seekTo(base.options.start);}},playerClickEvents:function(){var base=this;$('body').on('click','.'+base.options.playButtonClass,function(e){e.preventDefault();player.playVideo();}).on('click','.'+base.options.pauseButtonClass,function(e){e.preventDefault();player.pauseVideo();}).on('click','.'+base.options.muteButtonClass,function(e){e.preventDefault();(player.isMuted())?player.unMute():player.mute();}).on('click','.'+base.options.volumeDownClass,function(e){e.preventDefault();var currentVolume=player.getVolume();if(currentVolume<base.options.increaseVolumeBy)currentVolume=base.options.increaseVolumeBy;player.setVolume(currentVolume-base.options.increaseVolumeBy);}).on('click','.'+base.options.volumeUpClass,function(e){e.preventDefault();if(player.isMuted())player.unMute();var currentVolume=player.getVolume();if(currentVolume>100-base.options.increaseVolumeBy)currentVolume=100-base.options.increaseVolumeBy;player.setVolume(currentVolume+base.options.increaseVolumeBy);});},resizeYT:function(){var base=this;base.$el.each(function(){var el=$(this),width=el.length>0?el.width():$(window).width(),pWidth,height=el.length>0?el.height():$(window).height(),pHeight,$tubularPlayer=el.find('.tubular-player');if(width/base.options.ratio<height){pWidth=Math.ceil(height*base.options.ratio);$tubularPlayer.width(pWidth).height(height).css({left:(width-pWidth)/2,top:0});}else{pHeight=Math.ceil(width/base.options.ratio);$tubularPlayer.width(width).height(pHeight).css({left:0,top:(height-pHeight)/2});}});},loadYTIframe:function(){var tag=document.createElement('script');tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);},loadYT:function(){var base=this;base.$el.each(function(){var $this=$(this),vID=$this.attr('data-yt-video'),$ID=$this.find('.tubular-player'),ID=$ID.attr('ID');base.ID=ID;player[ID]=new YT.Player(ID,{width:base.options.width,height:Math.ceil(base.options.width/base.options.ratio),videoId:vID,playerVars:{version:3,autoplay:0,controls:0,showinfo:0,modestbranding:1,wmode:'transparent',rel:0,loop:1},events:{'onReady':onPlayerReady,'onStateChange':onPlayerStateChange}});});function onPlayerReady(e){base.onPlayerReady(e,base);}
function onPlayerStateChange(state){base.onPlayerStateChange(state,base);}}});$.fn[pluginName]=function(options){var args=arguments;if(options===undefined||typeof options==='object'){if(!$.data(this,'plugin_'+pluginName)){$.data(this,'plugin_'+pluginName,new Plugin(this,options));}}else if(typeof options==='string'&&options[0]!=='_'&&options!=='init'){var returns;this.each(function(){var instance=$.data(this,'plugin_'+pluginName);if(instance instanceof Plugin&&typeof instance[options]==='function'){returns=instance[options].apply(instance,Array.prototype.slice.call(args,1));}
if(options==='destroy'){$.data(this,'plugin_'+pluginName,null);}});return returns!==undefined?returns:this;}};})(jQuery,window);