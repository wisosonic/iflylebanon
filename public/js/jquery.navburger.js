/*!Tappy! - a lightweight normalized tap event. Copyright 2013 @scottjehl, Filament Group, Inc. Licensed MIT*/(function(w,$,undefined){w.tapHandling=false;w.tappy=true;var tap=function($els){return $els.each(function(){var $el=$(this),resetTimer,startY,startX,cancel,scrollTolerance=10;function trigger(e){$(e.target).trigger("tap",[e,$(e.target).attr("href")]);}
function getCoords(e){var ev=e.originalEvent||e,touches=ev.touches||ev.targetTouches;if(touches){return[touches[0].pageX,touches[0].pageY];}
else{return null;}}
function start(e){if(e.touches&&e.touches.length>1||e.targetTouches&&e.targetTouches.length>1){return false;}
var coords=getCoords(e);if(typeof coords!=='undefined'&&coords.length>1){startX=coords[0];startY=coords[1];}else{startX=0;startY=0;}}
function move(e){if(!cancel){var coords=getCoords(e);if(coords&&(Math.abs(startY-coords[1])>scrollTolerance||Math.abs(startX-coords[0])>scrollTolerance)){cancel=true;}}}
function end(e){clearTimeout(resetTimer);resetTimer=setTimeout(function(){w.tapHandling=false;cancel=false;},1000);if((e.which&&e.which>1)||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey){return;}
e.preventDefault();if(cancel||w.tapHandling&&w.tapHandling!==e.type){cancel=false;return;}
w.tapHandling=e.type;trigger(e);}
$el.bind("touchstart.tappy MSPointerDown.tappy",start).bind("touchmove.tappy MSPointerMove.tappy",move).bind("touchend.tappy MSPointerUp.tappy",end).bind("click.tappy",end);});};var untap=function($els){return $els.unbind(".tappy");};if($.event&&$.event.special){$.event.special.tap={add:function(handleObj){tap($(this));},remove:function(handleObj){untap($(this));}};}
else{var oldBind=$.fn.bind,oldUnbind=$.fn.unbind;$.fn.bind=function(evt){if(/(^| )tap( |$)/.test(evt)){tap(this);}
return oldBind.apply(this,arguments);};$.fn.unbind=function(evt){if(/(^| )tap( |$)/.test(evt)){untap(this);}
return oldUnbind.apply(this,arguments);};}}(this,jQuery));;(function($,window,document,undefined){var pluginName='navBurger',defaults={menuLink:'.nb-menu-link',pageWrap:'#nb-menu-page',wrapInside:'body',menuWidth:260,clone:false,customDiv:false,customDivMenuLocation:false,menuTime:0.5,subMenuTime:0.5,delay:0,backText:'Back',closeOnClick:true,position:'right',fixedElements:'#fp-nav'};function Plugin(element,options){this.element=element;this.$elem=$(element);this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.init();}
$.extend(Plugin.prototype,{init:function(){var base=this;base.loadMenu();},loadMenu:function(){var base=this;base.setVars();base.wrapItems();base.pushMenu();base.menuClick();base.menuItemClick();base.resizeFunctions();},setVars:function(){var base=this;base.$body=$('body').css({'overflowX':'hidden'});base.$w=$(window);base.$html=$('html');base.options.$menu=base.$elem;base.options.menuLink=base.options.menuLink&&$(base.options.menuLink);base.$middleLine=base.options.menuLink.find('span');base.$topLine=base.options.menuLink.find('span:before');base.$bottomLine=base.options.menuLink.find('span:after');base.$menuLinkPosition=base.options.menuLink.css('position');base.$additions=base.options.fixedElements&&$(base.options.fixedElements).addClass('nb-fixed');},wrapItems:function(){var base=this;if(base.options.pageWrap&&$(base.options.pageWrap).length==0){$(base.options.wrapInside).wrap("<div id='"+base.options.pageWrap.replace('#','')+"'></div>");base.options.pageWrap=$(base.options.pageWrap).css({'position':'relative','z-index':3});}else{base.options.pageWrap=$(base.options.pageWrap);}
base.options.menuList=$(base.options.$menu);base.cloneMenu();base.options.$menu.css({'display':'none'});base.options.menuContainer=base.options.menuList.children('ul').addClass('nb-menu-items-container');base.options.menuItems=base.options.menuContainer.find('li');if($('#nb-menu-blocker').length==0){base.$body.append($("<div id='nb-menu-blocker' class='nb-fixed'></div>"));}
base.options.menuBlocker=$('#nb-menu-blocker');base.options.menuLevels=base.options.menuItems.find('ul').wrap("<div class='nb-menu-level'></div>").prepend("<span class='nb-back'>"+base.options.backText+"</span>");base.options.backButton=$('span.nb-back');base.options.menuItems.has('ul').find('a').wrap("<span class='nb-menu-item-container'></span>");$('.nb-menu-level').not('.nb-menu-level.nb-menu-items-container').css({'display':'none'});base.options.menuItems.has('ul').addClass('nb-with-ul').children('.nb-menu-item-container').append("<span class='arrow'></span>");base.options.arrow=$('.nb-menu-items-container .arrow');base.setBackText();},cloneMenu:function(){var base=this,$menu=$(base.options.$menu);if(base.options.clone==true){base.options.menuList=$(base.options.$menu).clone();base.options.menuList.attr('id','').addClass('tw-'+base.options.position).children('ul').removeClass();base.customDiv(base.options.menuList);}else{base.options.menuList=base.options.$menu.attr('id','');base.customDiv(base.options.menuList);}
base.$menuItems=base.options.$menu.find('a');},customDiv:function(menu){var base=this
customDiv=$(base.options.customDiv);if(!customDiv.hasClass('nb-menu-level')){if(base.options.customDiv&&base.options.customDivMenuLocation){menu.prependTo(base.options.customDivMenuLocation);base.options.$menu=customDiv.prependTo("body").addClass('nb-menu-level').attr('id','nb-popoutmenu').addClass('tw-'+base.options.position).width(base.options.menuWidth);}else{base.options.$menu=menu.prependTo("body").addClass('nb-menu-level').attr('id','nb-popoutmenu').width(base.options.menuWidth);}}else{base.options.$menu=customDiv;}},setBackText:function(){var base=this;base.options.menuLevels.each(function(){var $menu=$(this),backText=$menu.closest('li').find('a').html(),backLink=$menu.find('.nb-back');backLink.html(backText);});},addOpenClasses:function(){var base=this;if(base.options.open){base.options.pageWrap.addClass('nb-menu-open');base.$html.addClass('nb-menu-open-wrapper');}else{base.options.pageWrap.removeClass('nb-menu-open');base.$html.removeClass('nb-menu-open-wrapper');}},sizePageWrap:function(sizeBool){var base=this;if(sizeBool){base.options.pageWrap.css({'height':base.$w.outerHeight()+'px','overflow':'hidden'}).addClass('nb-nav-opened');}else{base.options.pageWrap.css({'height':'','overflow':'auto'}).removeClass('nb-nav-opened');}},changeMenuIcon:function(state){var base=this;if(state&&state=='opened'){setTimeout(function(){base.options.menuLink.addClass('closeout');},base.options.menuTime*100+75);}else{setTimeout(function(){base.options.menuLink.removeClass('closeout');},base.options.menuTime*100+75);}},openMenu:function(){var base=this,addition=addition=$('.nb-fixed');base.options.$menu.css({'display':'block'});base.changeMenuIcon('opened');beforeOpenCallBack();if(base.options.position=='right'){TweenMax.set(base.options.$menu,{x:base.options.menuWidth});TweenMax.to(base.options.pageWrap.add(addition),base.options.menuTime,{x:-base.options.menuWidth,ease:Expo.easeOut,delay:base.options.delay,onComplete:openedCallBack});}else{TweenMax.set(base.options.$menu,{x:-base.options.menuWidth});TweenMax.to(base.options.pageWrap.add(addition),base.options.menuTime,{x:base.options.menuWidth,ease:Expo.easeOut,delay:base.options.delay,onComplete:openedCallBack});}
TweenMax.to(base.options.$menu,base.options.menuTime,{x:0,ease:Expo.easeOut,});function openedCallBack(){base.menuOpened();}
function beforeOpenCallBack(){base.menuBeforeOpen();}},closeMenu:function(){var base=this,addition=$('.nb-fixed');base.changeMenuIcon('closed');beforeCloseCallBack();TweenMax.to(base.options.pageWrap.add(addition),base.options.menuTime,{x:0,ease:Expo.easeOut,onComplete:closedCallBack});if(base.options.position=='right'){TweenMax.to(base.options.$menu,base.options.menuTime,{x:base.options.menuWidth,ease:Expo.easeOut,delay:base.options.delay});}else{TweenMax.to(base.options.$menu,base.options.menuTime,{x:-base.options.menuWidth,ease:Expo.easeOut,delay:base.options.delay});}
function closedCallBack(){base.menuClosed();}
function beforeCloseCallBack(){base.menuBeforeClose();}},openSubMenu:function(subMenu){var base=this;TweenMax.set(subMenu,{'right':-base.options.menuWidth,'display':'block','z-index':2,'opacity':0});TweenMax.to(subMenu,base.options.subMenuTime,{'right':0,'opacity':1,ease:Expo.easeOut});TweenMax.to(base.options.menuContainer,base.options.subMenuTime,{'height':subMenu.find('ul').height()+'px',ease:Expo.easeOut});subMenu.addClass('nb-opened');},closeSubMenu:function(subMenu){var base=this,parentMenu=subMenu.parent().closest('ul'),newHeight=parentMenu.height();if(parentMenu.hasClass('nb-menu-items-container')){TweenMax.to(base.options.menuContainer,base.options.subMenuTime,{'height':'auto',ease:Expo.easeOut});}else{TweenMax.to(base.options.menuContainer,base.options.subMenuTime,{'height':subMenu.parent().closest('ul').height()+'px',ease:Expo.easeOut});}
TweenMax.to(subMenu,base.options.subMenuTime,{'right':-base.options.menuWidth,'opacity':0,ease:Expo.easeOut});subMenu.removeClass('nb-opened');},backToTopMenu:function(){var base=this,subMenus=$('.nb-opened');TweenMax.to(subMenus,1,{'right':-base.options.menuWidth,'opacity':0,ease:Expo.easeOut});},menuClick:function(){var base=this;base.options.menuLink.off('click tap');base.options.menuLink.on('click tap',function(e){base.openMenu();e.preventDefault();});base.options.menuBlocker.off('click tap');base.options.menuBlocker.on('click tap',function(e){base.closeMenu();e.preventDefault();});},menuItemClick:function(){var base=this;if(base.options.closeOnClick){base.$menuItems.click(function(e){if($(this).attr('href')!='#'){base.closeMenu();}else{e.preventDefault();$(this).next('span.arrow').click();}});}},pushMenu:function(){var base=this;base.options.arrow.click(function(e){var subMenu=$(this).closest('.nb-menu-item-container').next('.nb-menu-level');base.openSubMenu(subMenu);});base.options.backButton.click(function(){var subMenu=$(this).closest('.nb-menu-level');base.closeSubMenu(subMenu);});},menuBeforeOpen:function(){var base=this;base.options.menuBlocker.css('display','block');},menuBeforeClose:function(){},menuOpened:function(){var base=this;base.options.open=true;base.addOpenClasses();},menuClosed:function(){var base=this;base.options.open=false;base.addOpenClasses();base.options.menuBlocker.css('display','none');base.options.pageWrap.css('transform','');},resizeFunctions:function(){var base=this;$(window).resize(function(){if(base.options.pageWrap.hasClass('nb-nav-opened')){base.sizePageWrap(true);}});}});$.fn[pluginName]=function(options){var args=arguments;if(typeof TweenMax!=='function'){console.log('The navBurger plugin requires TweenMax.js to function. Please load TweenMax.js before navBurger.');return false;}
if(options===undefined||typeof options==='object'){return this.each(function(){if(!$.data(this,'plugin_'+pluginName)){$.data(this,'plugin_'+pluginName,new Plugin(this,options));}});}else if(typeof options==='string'&&options[0]!=='_'&&options!=='init'){var returns;this.each(function(){var instance=$.data(this,'plugin_'+pluginName);if(instance&&typeof instance[options]==='function'){returns=instance[options].apply(instance,Array.prototype.slice.call(args,1));}
if(options==='destroy'){$.data(this,'plugin_'+pluginName,null);}});return returns!==undefined?returns:this;}};})(jQuery,window,document);